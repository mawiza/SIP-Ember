// Generated by CoffeeScript 1.7.1
(function() {
  describe('Focusareas should', function() {
    ({
      before: function() {
        return Ember.run(function() {
          var store;
          store = App.__container__.lookup('store:main');
          store.find('themes');
          return store.find('focusareas');
        });
      }
    });
    describe('should have a model that', function() {
      it('should have a content property', function() {
        var contentProperty;
        contentProperty = App.Focusarea.metaForProperty('definition');
        return expect(contentProperty.type).to.equal('string');
      });
      it('should have a focusareas property', function() {
        var contentProperty;
        contentProperty = App.Focusarea.metaForProperty('theme');
        return expect(contentProperty.type).to.equal('theme');
      });
      return it('can be created', function() {
        return Ember.run(function() {
          var store, theme;
          store = App.__container__.lookup('store:main');
          theme = store.createRecord("theme", {
            definition: 'theme definition created in focusareas spec'
          });
          return theme.save().then(function() {
            var focusarea;
            focusarea = store.createRecord("focusarea", {
              definition: 'focusarea definition created calling createRecord',
              theme: theme
            });
            return focusarea.save().then(function() {
              return theme.get("focusareas").then(function(focusareas) {
                focusareas.pushObject(focusarea);
                return expect(theme.get('focusareas').get('length')).to.equal(1);
              });
            });
          });
        });
      });
    });
    describe('a focusareas page', function() {
      it('theme should have an add new focusarea button', function() {
        visit('/themes');
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').then(function() {
            findWithAssert('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.active');
            return findWithAssert('a.add-focusarea');
          });
        });
      });
      it('should direct to the new route when clicked', function() {
        visit('/themes');
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('a.add-focusarea').then(function() {
            return expect(currentURL()).to.match(/^\/themes\/.*\/focusareas\/new$/);
          });
        });
      });
      return it('should have focus areas that each can be clicked to be edited', function() {
        visit('/themes');
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').then(function() {
            return findWithAssert('ul.focusarea-definitions li:contains("focusarea definition created calling createRecord") a');
          });
        });
      });
    });
    describe('a new focusarea page that', function() {
      it('should have a field and a submit button', function() {
        visit("/themes");
        return andThen(function() {
          return click('a.add-focusarea').then(function() {
            findWithAssert('form');
            findWithAssert('#definition');
            return findWithAssert("button.submit-button");
          });
        });
      });
      it('should create a new focusarea entry when submit gets clicked', function() {
        visit("/themes");
        return andThen(function() {
          click('a.add-focusarea');
          return fillIn('#definition', 'focusarea-definition1').click('button.submit-button').then(function() {
            return expect(currentURL()).to.match(/^\/themes\/.*\/focusareas$/);
          });
        });
      });
      it('should be valid', function() {
        visit("/themes");
        return andThen(function() {
          return click('a.add-focusarea').fillIn('#definition', '').click('button.submit-button').then(function() {
            return expect(currentURL()).to.match(/^\/themes\/.*\/focusareas\/new$/);
          });
        });
      });
      it('should transition to the the themes page of the added focusarea', function() {
        visit('/themes');
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('a.add-focusarea').fillIn('#definition', 'focusarea-definition2').click('button.submit-button').then(function() {
            return expect(find('ul.focusarea-definitions li').length).to.equal(2);
          });
        });
      });
      return it('should have focusareas that each can be clicked to be edited', function() {
        visit('/themes');
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').then(function() {
            return findWithAssert('ul.focusarea-definitions li:contains("focusarea-definition2") a');
          });
        });
      });
    });
    return describe('an edit focusarea page that', function() {
      it('should be accessed from the focusareas page', function() {
        visit("/themes");
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('ul.focusarea-definitions li:contains("focusarea-definition2") a').then(function() {
            findWithAssert('form');
            findWithAssert('#definition');
            findWithAssert("button.update-button");
            return findWithAssert("button.delete-button");
          });
        });
      });
      it('should be possible to update the record', function() {
        visit("/themes");
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('ul.focusarea-definitions li:contains("focusarea-definition2") a').then(function() {
            return fillIn('#definition', 'focusarea-definition3').click('button.update-button').then(function() {
              expect(currentURL()).to.match(/^\/themes\/.*\/focusareas$/);
              return findWithAssert('ul.focusarea-definitions li:contains("focusarea-definition3") a');
            });
          });
        });
      });
      it('should be possible to cancel the update', function() {
        visit("/themes");
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('ul.focusarea-definitions li:contains("focusarea-definition3") a').then(function() {
            fillIn('#definition', 'focusarea-definition4');
            return click('button.cancel-button').then(function() {
              expect(currentURL()).to.match(/^\/themes\/.*\/focusareas$/);
              return findWithAssert('ul.focusarea-definitions li:contains("focusarea-definition3") a');
            });
          });
        });
      });
      return it('should be possible to delete the record', function() {
        visit("/themes");
        return andThen(function() {
          return click('ul.theme-definitions li:contains("theme definition created in focusareas spec") a.select-theme').click('ul.focusarea-definitions li:contains("focusarea-definition3") a').then(function() {
            fillIn('#definition', 'focusarea-definition3');
            return click('button.delete-button').then(function() {
              expect(currentURL()).to.match(/^\/themes\/.*\/focusareas$/);
              return expect(find('ul.focusarea-definitions li').length).to.equal(1);
            });
          });
        });
      });
    });
  });

}).call(this);

//# sourceMappingURL=focusareas_spec.map
