// Generated by CoffeeScript 1.7.1
(function() {
  Ember.Utility = Ember.Object.extend({
    updateOrSave: function(controller, administration) {
      var count, shouldSave;
      shouldSave = true;
      if (Ember.isEmpty(administration.get('name'))) {
        controller.notify.danger("Name cannot be empty.");
        shouldSave = false;
      }
      count = 0;
      controller.store.all('administration').forEach(function(record) {
        if (record.get('name') === administration.get('name')) {
          return count += 1;
        }
      });
      if (count > 1) {
        controller.notify.danger(administration.get('name') + " is already used.");
        shouldSave = false;
      }
      if (Ember.isEmpty(administration.get('color'))) {
        controller.notify.danger("Color cannot be empty.");
        shouldSave = false;
      }
      if (shouldSave) {
        return administration.save().then(function() {
          return controller.transitionToRoute('/administrations');
        });
      } else {
        return controller.transitionToRoute('/administrations/new');
      }
    },
    themeId: function(currentUrl) {
      var regex, result;
      regex = /\/themes\/(.*)\/focusareas/;
      result = regex.exec(currentUrl) || ["", null];
      if (result != null) {
        result = regex.exec(App.__container__.lookup('router:main').get('url')) || ["", null];
      }
      console.log("THEME_ID ->", result[1]);
      return result[1];
    }
  });

  Ember.Application.initializer({
    name: "registerUtilities",
    initialize: function(container, application) {
      application.register("utility:main", Ember.Utility);
    }
  });

  Ember.Application.initializer({
    name: "injectUtilities",
    initialize: function(container, application) {
      application.inject("controller", "utility", "utility:main");
      application.inject("route", "utility", "utility:main");
    }
  });

}).call(this);

//# sourceMappingURL=utility.map
