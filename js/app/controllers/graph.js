// Generated by CoffeeScript 1.7.1
(function() {
  App.GraphController = Ember.ArrayController.extend({
    nodes: [],
    edges: [],
    data: (function() {
      return {
        nodes: this.get('nodes'),
        edges: this.get('edges')
      };
    }).property('nodes', 'edges'),
    actions: {
      loadStrategies: function() {
        var self, strategies;
        this.nodes = [];
        this.edges = [];
        strategies = this.get('model').filterProperty('selected', true);
        self = this;
        return strategies.forEach(function(strategy) {
          return self._buildNode(strategy);
        });
      }
    },
    selectedStrategiesCount: (function() {
      return this.get('model').filterProperty('selected', true).get('length');
    }).property('strategies.@each.strategy'),
    _buildNode: function(strategy) {
      var node, self;
      self = this;
      node = {};
      node['id'] = strategy.get('id');
      node['description'] = strategy.get('description');
      node['selected'] = strategy.get('selected');
      return this.store.find('administration', strategy.get('administration.id')).then(function(administration) {
        node['group'] = administration.get('name');
        node['color'] = administration.get('color');
        node['administration_id'] = administration.get('id');
        return self.store.find('focusarea', strategy.get('focusarea.id')).then(function(focusarea) {
          node['focusarea'] = focusarea.get('definition');
          node['focusarea_id'] = focusarea.get('id');
          self.nodes.push(node);
          return console.log("NODE:", node);
        });
      });
    }
  });

}).call(this);

//# sourceMappingURL=graph.map
